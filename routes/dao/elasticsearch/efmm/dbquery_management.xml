<?xml version="1.0"?>
<queryList>
  <management>
    <query id='selectRecipeList'><![CDATA[
      {
        "index" : "efmm_management",
        "type"  : "efmm_management",
        "body" : {
          "size": 1000,
          "_source" : "*",
          "query" : {
            "bool" : {
              "must": [
                {"term" : {"flag" : "recipe"}},
                {"term" : {"step" : #step#}},
                {"term" : {"cid" : #cid#}}
              ]
            }
          }
        }
      }
    ]]></query>
    <query id='selectRecipeById'><![CDATA[
      {
        "index" : "efmm_management",
        "type"  : "efmm_management",
        "body" : {
          "_source" : [ "*" ],
          "query" : {
            "bool" : {
              "must": [
                {"term" : {"flag" : "recipe"}},
                {"term" : {"id" : #id#}}
              ]
            }
          }
        }
      }
    ]]></query>
    <query id='selectRecipe_NOTCHING_HistoryById'><![CDATA[
      {
        "index" : "efmm_notching_status-*",
        "type"  : "status",
        "body" : {
          "size" : 10,
          "sort": [{"data.dtSensed" : {"order" : "desc"}}],
          "query" :
          {
            "bool" :
            {
              "must" : [
                {"term" : {"flag" : #step#}},
                {"term" : {"cid" : #cid#}},
                {"term" : {"sensorType": "recipe"}}
              ],
              "filter" : {
                "exists" :
                {"field" : #field#}
              }
            }
          }
        }
      }
    ]]></query>
    <query id='selectRecipe_STACKING_HistoryById'><![CDATA[
      {
        "index" : "efmm_stacking_status-*",
        "type"  : "status",
        "body" : {
          "size" : 10,
          "sort": [{"data.dtSensed" : {"order" : "desc"}}],
          "query" :
          {
            "bool" :
            {
              "must" : [
                {"term" : {"flag" : #step#}},
                {"term" : {"cid" : #cid#}},
                {"term" : {"sensorType": "recipe"}}
              ],
              "filter" : {
                "exists" :
                {"field" : #field#}
              }
            }
          }
        }
      }
    ]]></query>
    <query id='insertRecipe'><![CDATA[
      {
        "index" : "efmm_management",
        "type" : "efmm_management",
        "body" : {
          "flag" : "recipe",
          "step" : #step#,
          "cid" : #cid#,
          "id" : #id#,
          "type" : #type#,
          "name" : #name#,
          "description" : #description#,
          "unit" : #unit#,
          "stepno" : #stepno#,
          "tagname" : #tagname#,
          "datatype" : #datatype#,
          "datasize" : #datasize#,
          "datavalue" : #datavalue#,
          "updatetimestamp" : #updatetimestamp#
        }
      }
    ]]></query>
    <query id='updateRecipe'><![CDATA[
      {
        "index" : "efmm_management",
        "type" : "efmm_management",
        "id" : #_id#,
        "body" : {
          "doc" : {
            "flag" : "recipe",
            "step" : #step#,
            "cid" : #cid#,
            "id" : #id#,
            "type" : #type#,
            "name" : #name#,
            "description" : #description#,
            "unit" : #unit#,
            "stepno" : #stepno#,
            "tagname" : #tagname#,
            "datatype" : #datatype#,
            "datasize" : #datasize#,
            "datavalue" : #datavalue#,
            "updatetimestamp" : #updatetimestamp#
          }
        }
      }
    ]]></query>
    <query id='deleteRecipe'><![CDATA[
      {
        "index" : "efmm_management",
        "type" : "efmm_management",
        "id" : #_id#
      }
    ]]></query>
    <query id='selectAlarmList'><![CDATA[
      {
        "index" : "efmm_management",
        "type" : "efmm_management",
        "body" : {
          "size" : 50,
          "sort" : { "timestamp" : { "order" : "desc" } },
          "query" : {
            "bool" : {
              "must": [
                {"term" : {"flag" : "alarm"}}
              ]
            }
          }
        }
      }
    ]]></query>
    <query id='insertAlarmData'><![CDATA[
      {
        "index" : "efmm_management",
        "type" : "efmm_management",
        "body" : #BODY#
      }
    ]]></query>
  </management>
</queryList>
